!function(e){e.simpleDrawer=function(i,s){this.defaults={btnside:"left",drawerside:"left",fixed:!0},this.elements={btn:".simple-drawer-btn",bar:".simple-drawer-fixed-bar",drawer_inner:".simple-drawer-inner",overlay:".simple-drawer-overlay",wrapper:".simple-drawer-wrapper"},this.setting=e.extend(this.defaults,s),this.initialize(i),this.handleEvents(),1==this.setting.fixed&&this.fixedBarOnScroll()},e.extend(e.simpleDrawer.prototype,{initialize:function(i){this.$el=e(i),this.$btn=e(this.elements.btn),this.$fixed_bar=e(this.elements.bar),this.$window=e(window),this.start_pos=0,this.elementBtnSide(),this.elementDrawerSide(),this.drawerInnerHeight(),this.drawerPartsAppend()},handleEvents:function(){var e=this,i="ontouchstart"in document?"touchstart":"click";this.$btn.on(i,function(){return e.$el.hasClass("is-open")?e.drawerSlideClose():e.drawerSlideOpen(),!1}),this.$overlay.on(i,function(){return e.drawerSlideClose(),!1})},drawerSlideOpen:function(){return this.$el.addClass("is-open"),this.$btn.addClass("is-open"),this.$overlay.addClass("is-fadein"),this.$fixed_bar.addClass("is-open"),this.wrapperScrollOff(),!1},drawerSlideClose:function(){var e=this;return this.$el.removeClass("is-open"),this.$btn.removeClass("is-open"),this.$overlay.removeClass("is-fadein"),this.wrapperScrollOn(),setTimeout(function(){e.$fixed_bar.removeClass("is-open")},300),!1},drawerInnerHeight:function(){var i=this.$el.children(this.elements.drawer_inner),s=i.height(),t=e(window).height();t<s&&i.css("height",t-80)},drawerPartsAppend:function(){var i=this.elements.overlay.substr(1);this.$overlayParts='<div class="'+i+' c-drawer__overlay"></div>',e(this.elements.overlay).length<=0&&e("body").append(this.$overlayParts),this.$overlay=e(this.elements.overlay)},wrapperScrollOff:function(){this.scrollpos=e(window).scrollTop(),e(this.elements.wrapper).addClass("is-fixed").css({top:-this.scrollpos})},wrapperScrollOn:function(){e(this.elements.wrapper).removeClass("is-fixed").css({top:0}),window.scrollTo(0,this.scrollpos)},elementBtnSide:function(){return"left"==this.setting.btnside?(this.$btn.addClass("is-left"),!1):"right"==this.setting.btnside?(this.$btn.addClass("is-right"),!1):void 0},elementDrawerSide:function(){return"left"==this.setting.drawerside?(this.$el.addClass("is-left"),!1):"right"==this.setting.drawerside?(this.$el.addClass("is-right"),!1):void 0},fixedBarOnScroll:function(){var i=this,s="ontouchstart"in document?"touchmove":"scroll";this.$window.on(s,function(){var s=e(window).scrollTop();i.$btn.hasClass("is-open")||(s>0&&s>i.start_pos?i.fixedBarSlideOut():i.fixedBarSlideIn(),i.start_pos=s)})},fixedBarSlideIn:function(){this.$fixed_bar.removeClass("is-slideout")},fixedBarSlideOut:function(){this.$fixed_bar.addClass("is-slideout")}}),e.fn.simpleDrawer=function(i){return this.each(function(){new e.simpleDrawer(this,i)})}}(jQuery);